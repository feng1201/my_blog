
# 实验记录

鉴于之前GRPO效果不佳，很可能原因就在数据上。下午计划重新跑一遍数据处理流程，并清洗一遍数据。

## 今日todolist:
1. 从头跑一遍数据处理过程
2. 挑选靠前最多的keyword的事项进行示例观察

不得不说做LLM的实验还是太慢了，每跑一次脚本都需要好久，怀念之前跑小模型的时光(悲。第一版的代码事件提取后有5334条，统计数据如下：

### united_states|report_release|price|up 示例:
1. The average price of gasoline in the United States is around $3.80 per gallon
2. Brent crude oil averaged over $100 per barrel in 2011
3. The price of oil can affect fuel consumption, as lower energy prices can encourage additional fuel consumption.
4. The domestic trade in the United States consists of Alaskan crude oil and refined petroleum products.
5. Oil prices were at or below U.S. $20/bbl for much of the period since 1986.

同时我发现第五条同样被归为 united_states|price_change|price|up，这可能意味着我们的事件划分方式存在问题。

## 问题分析

经过分析后，我认为主要问题如下：

1. **关键词太泛了，区分度低**。这可能会导致“主体-行为-客体”难以判别，容易把不同事件挤在同一个keyword中。
2. **LLM总结出来的文字别名缩写不统一**。

其中第二个问题可以写一个映射函数进行统一。第一个问题我交给了GPT5，命令其进行广泛阅读并给出keyword槽位的修改建议。它建议增加客体列表，同时在行为槽位增加了贸易/生产/运营...等多个方面的keywords，主体删除了market这个宽泛类。并增加了一些公司、组织和国家。我认为这是比较合理的。

GPT给出的第二版代码效果并不理想，可能是因为删去了market跑出来主体一大半都是美国(虽然说这个占比确实不低)。

后面第三版代码我进一步修改提取关键词的prompt，将market加了回来，并要求除非是明确制裁/关税/价格上限/战略石油储备行动其余请不要填写美国，同时允许返回none。第三版的效果比前面好很多，至少没有出现特别明显某个keyword或者主体占比超过70%。

同时我对于LLM将主体归为none的新闻也很好奇，所以挑了几个示例看看。

### none|price_change|price|up 示例:
1. The U.S. military in Iraq pays a higher price for fuel compared to Iraqi citizens.
2. U.S. gasoline prices and oil prices ticked up as the Strategic Petroleum Reserve fell to its lowest level since 1983.
3. The price of gasoline and oil has been rising, influenced by taxes and wellhead prices.
4. US gasoline prices have begun their seasonal rise.
5. Fuel oil prices rose 9.2 percent.

看样子是把第一版中归为美国主体没有明确指向的新闻归为了none，合理的。看起来除了极个别新闻，大部分都可以归为market，毕竟是市场的价格上涨。

我将三版代码提取的keyword去重并保留top30后的统计数据保存了下来。

